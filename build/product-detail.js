"use strict";window.addEventListener("DOMContentLoaded",function(){function a(a){var b=a.getBoundingClientRect();return 0<=b.top&&0<=b.left&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)}var b=0,c=0;if(document.querySelector(".product-detail-container")){var d=function(){document.getElementById("detail_src_magnifying_small")&&(document.querySelector(".img-sticky img").src=document.getElementById("detail_src_magnifying_small").src),document.querySelector(".name-sticky").innerText=document.querySelector("h1").innerText,document.querySelector(".price-sticky .price_no_vat-sticky").innerText=document.querySelector(".price-novat").innerText,document.querySelector(".price-sticky .price_vat-sticky").innerText=document.querySelector(".price-vat .price-value.def_color").innerText,document.getElementById("buy_btn_container-sticky").appendChild(document.querySelector(".cart-info-btn").cloneNode(!0)),document.querySelector(".basket-sticky").appendChild(document.getElementById("basket_icon").cloneNode(!0)),document.querySelector(".affix-sticky__container").classList.add("affix")},e="",f=document.querySelector("input[name='number']"),g=document.querySelector(".price-value.def_color.product-stock-value"),h=document.querySelector(".fright.textright");if(f.length){f=f.value,document.querySelector(".before_variants.stock-line.stock-line-")&&document.querySelector(".before_variants.stock-line.stock-line-").remove(),e=f.trim();var i=encodeURIComponent(f)}var j=!1;e&&fetch("URL_HERE"+i).then(function(a){return a.json()}).then(function(a){g.querySelector("span").remove();var d=a[e];if(void 0===d&&(d=a[e.toUpperCase()]),b=d.supp_availability,0<d.disposition&&5>=d.disposition)g.innerHTML=d.disposition+"ks - Expedujeme ihne\u010F <div class=\"info-about-delivery\"><a href=\"#\"> Viac o dostupnosti ? </a></div>",g.style.fontSize="18px",g.style.color="#155724",g.style.backgroundColor="#d4edda";else if(5<d.disposition)c=d.disposition,g.innerHTML="Na sklade > 5ks - Expedujeme ihne\u010F <div class=\"info-about-delivery\"><a href=\"#\"> Viac o dostupnosti ?  </a></div>",g.style.fontSize="18px",g.style.color="#155724",g.style.backgroundColor="#d4edda";else if(5>=d.disposition&&"undefined"!=typeof d.allStorages&&"undefined"!=typeof d.allStorages[6]&&0<d.allStorages[6].disposable_quantity)g.innerHTML="Dostupn\xE9 Showroom Liptovsk\xFD Mikul\xE1\u0161 - expedovanie v nasleduj\xFAci pracovn\xFD de\u0148",g.style.fontSize="18px",g.style.color="#155724",g.style.backgroundColor="#d4edda";else if(5>=d.disposition&&"undefined"!=typeof d.allStorages&&"undefined"!=typeof d.allStorages[5]&&0<d.allStorages[5].disposable_quantity){var f=d.allStorages[5].disposable_quantity,i="";i=0<f&&5>=f?"Na sklade "+f+"ks":"Na sklade > 5ks",g.innerHTML=i,g.style.fontSize="18px",g.style.color="#155724",g.style.backgroundColor="#d4edda"}else{var k=parseInt(d.disp_status_flag),l=parseInt(d.disp_status);if(0===l||9===l)5<parseInt(d.supp_availability)?(g.innerHTML=d.disp_status_text+" <div class=\"info-about-delivery\"><a href=\"#\" data-text=\""+d.disp_status_description+"\"> Viac o dostupnosti ? </a></div>",g.style.fontSize="18px",g.style.color="#155724",g.style.backgroundColor="#d4edda",j=!1):(g.innerHTML="Tovar je aktu\xE1lne nedostupn\xFD. Dotazuj dostupnos\u0165. <div class=\"info-about-delivery\"><a href=\"#\" data-text=\"Tento tovar nie je dostupn\xFD na na\u0161om sklade ani na sklade dod\xE1vate\u013Ea. V pr\xEDpade z\xE1ujmu n\xE1m odo\u0161lite dotaz,  informujeme V\xE1s o dostupnosti pr\xEDpadne V\xE1m pon\xFAkneme vhodn\xFA variantu.\"> Viac o dostupnosti ? </a></div>",g.style.fontSize="18px",j=!0);else if(2===k){j=!1;var p=d.disp_status_text;d.disp_status_description&&(p+=" <div class=\"info-about-delivery\"><a href=\"#\"  data-text=\""+d.disp_status_description+"\"> Viac o dostupnosti ? </a></div>"),g.innerHTML=p,g.style.fontSize="18px"}else if(3===k){j=!0;var q=d.disp_status_text;d.disp_status_description&&(q+=" <div class=\"info-about-delivery\"><a href=\"#\" data-text=\""+d.disp_status_description+"\"> Viac o dostupnosti ? </a></div>"),g.innerHTML=q,g.style.fontSize="18px"}if(j){var m=document.getElementById("kusy"),n=document.getElementById("buy_btn"),o=document.querySelector(".product-cart-info-value");if(m&&(m.style.display="none"),n&&n.remove(),o&&o.querySelector(".count")&&o.querySelector(".count").remove(),h){var r=document.createElement("a");r.setAttribute("href","https://www.mojadielna.sk/geko/5-ZAKAZNICKA-PODPORA/4-Poslat-otazku-predajcovi"),r.innerHTML="<input type=\"button\" class=\"question_btn_custom\" id=\"buy_btn\" name=\"question_sbmt\" value=\"Dotaz\">",h.appendChild(r)}}}})["catch"](function(a){return console.error("Error loading product stock data: ",a)}),e&&fetch("https://api.ipify.org?format=jsonp&callback=?").then(function(a){return a.json()}).then(function(a){var b=a.ip,c="URL HERE"+e+"&ip="+b+"&country="+"SK"+"&eshopID=1";fetch(c)})["catch"](function(a){return console.error("Get ip from ipify: ",a)});var q=document.getElementById("stars_main").dataset.productId;fetch("URL FOR CATEGORIES HERE"+q).then(function(a){return a.json()}).then(function(a){if(!0===a.success&&a.categories){var b=" |  <a href=\"//www.mojadielna.sk/geko\">\xDAvod</a> <span class=\"arrow\">\xBB</span> ";a.categories.forEach(function(a){b+="<a href=\""+a.full_url+"\">"+a.catName+"</a> <span class=\"arrow\">\xBB</span> "});var c=document.querySelector("#wherei p");c.querySelector(".active")&&(b+="<span class=\"active\">"+c.querySelector(".active").innerHTML+"</span>"),c&&c.appendChild(b)}})["catch"](function(a){return console.error("Error fetching product categories",a)}),document.querySelector("body").addEventListener("click",function(a){if(a.target.classList.contains("info-about-delivery")){var d=a.target.querySelector("a");if(d.preventDefault(),!document.querySelector("td#js-custom-cell")){var e="";"text"in d.dataset?e=d.dataset.text:(e="Plat\xED pre objedn\xE1vky ktor\xE9 obsahuj\xFA v\u0161etky produkty s inform\xE1ciou expedujeme ihne\u010F.<br>",0<c&&20>=c?e+="<p style=\"padding-bottom:10px;padding-top:10px;\">Dostupnos\u0165 u n\xE1s "+c+"ks</p>":20<c&&(e+="<p style=\"padding-bottom:10px;padding-top:10px;\">Dostupnos\u0165 u n\xE1s > 20ks</p>"),0<b&&20>=b?e+="<p style=\"padding-bottom:10px;padding-top:10px;\">Posledn\xE1 Dostupnos\u0165 u dod\xE1vate\u013Ea "+b+"ks</p>":20<b&&(e+="<p style=\"padding-bottom:10px;padding-top:10px;\">Posledn\xE1 dostupnos\u0165 u dod\xE1vate\u013Ea > 20ks</p>"),e+="<a href=\"https://www.mojadielna.sk/geko/5-ZAKAZNICKA-PODPORA/4-Poslat-otazku-predajcovi\" target=\"_blank\">Pre inform\xE1cie o objednan\xED viac ako 20 kusov n\xE1s kontaktuje</a>");var f=document.createElement("tr");f.classList.add("before_variants"),f.innerHTML="</td><td colspan=\"3\" width=\"65%\" style=\"background-color:#cce5ff;color:#004085;font-weight:bold;\" id=\"js-custom-cell\">"+e+"</td>",d.parentElement.parentElement.parentElement.parentElement.appendChild(f)}}}),"https://www.mojadielna.sk/"!==window.location.href&&"https://www.mojadielna.sk"!==window.location.href&&(document.querySelector("#expandableMenu .root-eshop-menu > .sub").style.display="block");var k=document.querySelector("table.cart tr.stock-line-stock_no"),l=document.querySelector("table.cart tr.stock-line-stock_yes"),m=document.querySelector(".div.box-spc>div.stock_no");m&&m.remove(),k&&k.remove(),l&&l.remove();var n=!1,o=document.querySelector(".product-cart-info-value .cart-info-btn"),p=document.querySelector(".affix-sticky__container");window.addEventListener("scroll",function(){a(o)||n?a(o)&&p.classList.contains("affix")&&(document.querySelector("#buy_btn_container-sticky .cart-info-btn").remove(),document.querySelector(".basket-sticky #basket_icon").remove(),document.querySelector(".affix-sticky__container").classList.remove("affix"),n=!1):(d(),n=!0)}),document.querySelector("body").addEventListener("click",function(a){"buy_btn"===a.target.id&&"buy_btn_container-sticky"===a.target.parentElement.parentElement.id&&$(".product-price-box .product-cart-btn").trigger("click")}),document.querySelector("body").addEventListener("touchend",function(a){"buy_btn"===a.target.id&&"buy_btn_container-sticky"===a.target.parentElement.parentElement.id&&$(".product-price-box .product-cart-btn").trigger("click")})}});